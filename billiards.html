

<html>
  
  <head>
    <title>Billiards</title>
    <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
    <link rel="stylesheet" href="graphics.css">

    <style>
    html, body {
        padding: 0px;
        margin: 0px;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    canvas {
        width: 100%;
        height: 100%;
        border: none;
    }
    </style>

    <script type="text/javascript" src="common/MV.js"></script>
    <script type="text/javascript" src="common/webgl-utils.js"></script>
    <script type="text/javascript" src="common/initShaders.js"></script>

    <script id="billiardtable-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      attribute vec2 vertexUV;
      attribute vec3 vertexNormal;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;
      
      varying highp vec2 uv;
      varying vec3 normal;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
        uv = vec2(vertexUV.s, 1.0 - vertexUV.t);
        normal = vertexNormal;
      }
    </script>
    <script id="billiardtable-frag" type="x-shader/x-fragment">
      precision mediump float;

      varying highp vec2 uv;  // FIXME: rename this to textureCoord
      varying vec3 normal;

      uniform sampler2D textureSampler;

      void main(void) {
        gl_FragColor = texture2D(textureSampler, uv);
      }
    </script>

    <script id="cuestick-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      attribute vec2 vertexUV;
      attribute vec3 vertexNormal;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;

      varying highp vec2 uv;
      varying vec3 normal;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
        uv = vec2(vertexUV.s, 1.0 - vertexUV.t);
        normal = vertexNormal;
      }
    </script>

    <script id="billiardball-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      attribute vec2 vertexUV;
      attribute vec3 vertexNormal;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;
      
      varying highp vec2 uv;
      varying vec3 normal;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
        uv = vec2(vertexUV.s, 1.0 - vertexUV.t);
        normal = vertexNormal;
      }
    </script>
    <script id="billiardball-frag" type="x-shader/x-fragment">
      precision mediump float;

      varying highp vec2 uv;  // FIXME: rename this to textureCoord
      varying vec3 normal;

      uniform sampler2D textureSampler;
      uniform float fadeAlpha;

      void main(void) {
        gl_FragColor = vec4(texture2D(textureSampler, uv).rgb, fadeAlpha);
      }
    </script>

    <script id="billiardball-sdf-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      attribute vec2 vertexUV;
      attribute vec3 vertexNormal;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;
      
      varying highp vec2 uv;
      varying vec3 normal;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
        uv = vec2(vertexUV.s, 1.0 - vertexUV.t);
        normal = vertexNormal;
      }
    </script>
    <script id="billiardball-sdf-frag" type="x-shader/x-fragment">
      // Signed distance fields for crisp lettering, based on Chris Green's paper
      // See here: <http://www.valvesoftware.com/publications/2007/SIGGRAPH2007_AlphaTestedMagnification.pdf>
      precision mediump float;

      varying highp vec2 uv;  // FIXME: rename this to textureCoord
      varying vec3 normal;

      uniform sampler2D textureSampler;
      uniform vec3 outsideColor;
      uniform vec3 insideColor;

      void main(void) {
        vec4 baseColor = texture2D(textureSampler, uv);
        float distAlphaMask = baseColor.a;
        if (distAlphaMask <= 0.5) {
          gl_FragColor = vec4(outsideColor.rgb, 1.0);
        } else {
          gl_FragColor = vec4(insideColor.rgb, 1.0);
        }
      }
    </script>

    <script id="cuestick-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      attribute vec2 vertexUV;
      attribute vec3 vertexNormal;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;

      varying highp vec2 uv;
      varying vec3 normal;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
        uv = vec2(vertexUV.s, 1.0 - vertexUV.t);
        normal = vertexNormal;
      }
    </script>
    <script id="cuestick-frag" type="x-shader/x-fragment">
      precision mediump float;

      varying highp vec2 uv;  // FIXME: rename this to textureCoord
      varying vec3 normal;

      uniform sampler2D textureSampler;
      uniform float fadeAlpha;

      void main(void) {
        gl_FragColor = vec4(texture2D(textureSampler, uv).rgb, fadeAlpha);
      }
    </script>

    <script id="debug-vert" type="x-shader/x-vertex">
      attribute vec3 vertexPosition;
      
      uniform mat4 modelViewMatrix;
      uniform mat4 projectionMatrix;
      
      void main(void) {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(vertexPosition, 1.0);
      }
    </script>
    <script id="debug-frag" type="x-shader/x-fragment">
      precision mediump float;

      void main(void) {
        gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);
      }
    </script>

    <!------------------------------------------------------------>
    <!-- This is the file you will modify -->
    <!------------------------------------------------------------>
    <script type="text/javascript" src="billiards.js"></script>
  </head>
  
  <body>
    <canvas id="gl-canvas"></canvas>
  </body>
  
</html>
